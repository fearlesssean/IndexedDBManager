<!DOCTYPE html>
<html lang="en">

<ce-header title="PWA Workout: Logs"></ce-header>

<body class="center bg-warning">
    <ce-nav></ce-nav>
    <div class="container mt-5">
        <h1>Workout Logs</h1>
        <div class="mt-4 p-5 bg-dark text-white rounded">
            <div id="dataList"></div>
        </div>
    </div>
    <script src="scripts/bootstrap5.js"></script>
    <script src="scripts/IndexedDBManager.js"></script>
    <script src="scripts/custom-elements.js"></script>
    <script src="scripts/app.js"></script>
    <link href="styles/bootstrap5.css" rel="stylesheet">
    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            try {
                //Register the service worker
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('/IndexedDBManager/service-worker.js', { scope: '/IndexedDBManager/' })
                        .then((registration) => {
                            console.log('Service Worker registered with scope:', registration.scope);
                        })
                        .catch((error) => {
                            console.error('Service Worker registration failed:', error);
                        });
                }
                // Wait for database to initialize first
                await dbManager.init();
                console.log("Database initialized");
                // Then get the data
                getAllData();
            } catch (error) {
                console.error("Error during initialization:", error);
            }
        });
    </script>
</body>
<ce-footer></ce-footer>

</html>